---
- hosts: k8s-cluster
  roles:
    - { role: kubernetes/preinstall, tags: preinstall }
    - { role: etcd, tags: etcd }
    - { role: docker, tags: docker }
    - { role: kubernetes/node, tags: node }
    - { role: network_plugin, tags: network }

- hosts: kube-master
  roles:
    - { role: kubernetes/master, tags: master }

- hosts: k8s-cluster
  roles:
    - { role: dnsmasq, tags: dnsmasq }

- hosts: kube-master
  roles:
    - role: helm
      tags: helm
      when: helm_enabled|default('False')|bool

- hosts: kube-master
  roles:
    - role: deis
      tags: deis
      when: deis_enabled|default('False')|bool
