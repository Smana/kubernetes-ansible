kind: ReplicationController
apiVersion: v1
metadata:
  labels: {{ dashboard_labels | to_nice_json }}
  name: {{ dashboard.name }}
  namespace: kube-system
spec:
  replicas: 1
  selector: {{ dashboard_selector|default(dashboard_labels) | to_nice_json }}
  template:
    metadata:
      labels: {{ dashboard_labels | to_nice_json }}
    spec:
      containers:
      - name: {{ dashboard.name }}
        image: "{{ dashboard_container_image.name }}:{{ dashboard_container_image.tag|default('latest') }}"
{%      if dashboard_container_limits is defined %}
        resources:
          limits:
{%        if dashboard_container_limits.cpu is defined %}
            cpu: {{ dashboard_container_limits.cpu }}
{%        endif %}
{%        if dashboard_container_limits.memory is defined %}
            memory: {{ dashboard_container_limits.memory }}
{%        endif %}
{%      endif %}
{%      if dashboard_container_env is defined %}
        env:
{%        for env in dashboard_container_env %}
          - name: {{ env.name }}
            value: {{ env.value }}
{%        endfor %}
{%      endif %}
{%      if dashboard_container_command is defined %}
        command: {{ dashboard_container_command }}
{%      endif %}
{%      if dashboard_container_args is defined %}
        args: {{ dashboard_container_args }}
{%      endif %}
{% if dashboard_container_volumemounts is defined %}
        volumeMounts: {{ dashboard_container_volumemounts | to_nice_json }}
{% endif %}
{% if dashboard_container_ports is defined %}
        ports: {{ dashboard_container_ports | to_nice_json }}
{% endif %}
{% if dashboard_container_livenessprobe is defined %}
        livenessProbe: {{ dashboard_container_livenessprobe | to_nice_json }}
{% endif %}
{% if dashboard_container_readinessprobe is defined %}
        readinessProbe: {{ dashboard_container_readinessprobe | to_nice_json }}
{% endif %}
{% if dashboard_volumes is defined %}
      volumes: {{ dashboard_volumes | to_nice_json }}
{% endif %}
{% if dashboard_nodeselector is defined %}
      nodeSelector: {{ dashboard_nodeselector }}
{% endif %}
{% if dashboard_nodename is defined %}
      nodeName: "{{ dashboard_nodename }}"
{% endif %}
