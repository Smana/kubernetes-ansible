---
- name: "External OCI Cloud Controller Manager | Credentials Check | external_oracle_auth_key"
  ansible.builtin.assert:
    that:
      - external_oracle_auth_use_instance_principals or external_oracle_auth_key | length > 0
    fail_msg: "external_oracle_auth_key is missing"

- name: "External OCI Cloud Controller Manager | Credentials Check | external_oracle_auth_region"
  ansible.builtin.assert:
    that:
      - external_oracle_auth_use_instance_principals or external_oracle_auth_region | length > 0
    fail_msg: "external_oracle_auth_region is missing"

- name: "External OCI Cloud Controller Manager | Credentials Check | external_oracle_auth_tenancy"
  ansible.builtin.assert:
    that:
      - external_oracle_auth_use_instance_principals or external_oracle_auth_tenancy | length > 0
    fail_msg: "external_oracle_auth_tenancy is missing"

- name: "External OCI Cloud Controller Manager | Credentials Check | external_oracle_auth_user"
  ansible.builtin.assert:
    that:
      - external_oracle_auth_use_instance_principals or external_oracle_auth_user | length > 0
    fail_msg: "external_oracle_auth_user is missing"

- name: "External OCI Cloud Controller Manager | Credentials Check | external_oracle_auth_fingerprint"
  ansible.builtin.assert:
    that:
      - external_oracle_auth_use_instance_principals or external_oracle_auth_fingerprint | length > 0
    fail_msg: "external_oracle_auth_fingerprint is missing"

- name: "External OCI Cloud Controller Manager | Credentials Check | external_oracle_compartment"
  ansible.builtin.assert:
    that:
      - external_oracle_compartment | length > 0
    fail_msg: "external_oracle_compartment is missing. This is the compartment in which the cluster resides"

- name: "External OCI Cloud Controller Manager | Credentials Check | external_oracle_vcn"
  ansible.builtin.assert:
    that:
      - external_oracle_vcn | length > 0
    fail_msg: "external_oracle_vcn is missing. This is the Virtual Cloud Network in which the cluster resides"

- name: "External OCI Cloud Controller Manager | Credentials Check | external_oracle_load_balancer_subnet1"
  ansible.builtin.assert:
    that:
      - external_oracle_load_balancer_subnet1 | length > 0
    fail_msg: "external_oracle_load_balancer_subnet1 is missing. This is the first subnet to which load balancers will be added"

- name: "External OCI Cloud Controller Manager | Credentials Check | external_oracle_load_balancer_subnet2"
  ansible.builtin.assert:
    that:
      - external_oracle_load_balancer_subnet2 | length > 0
    fail_msg: "external_oracle_load_balancer_subnet2 is missing. Two subnets are required for load balancer high availability"

- name: "External OCI Cloud Controller Manager | Credentials Check | external_oracle_load_balancer_security_list_management_mode"
  ansible.builtin.assert:
    that:
      - external_oracle_load_balancer_security_list_management_mode in ["All", "Frontend", "None"]
    fail_msg: "external_oracle_load_balancer_security_list_management_mode is missing, or not defined correctly. Valid options are (All, Frontend, None)."
