---
dependencies:
  - role: kubernetes-apps/external_cloud_controller/openstack
    when:
      - cloud_provider is defined
      - cloud_provider == "external"
      - external_cloud_provider is defined
      - external_cloud_provider == "openstack"
      - inventory_hostname == first_kube_control_plane
    tags:
      - external-cloud-controller
      - external-openstack
  - role: kubernetes-apps/external_cloud_controller/vsphere
    when:
      - cloud_provider is defined
      - cloud_provider == "external"
      - external_cloud_provider is defined
      - external_cloud_provider == "vsphere"
      - inventory_hostname == first_kube_control_plane
    tags:
      - external-cloud-controller
      - external-vsphere
  - role: kubernetes-apps/external_cloud_controller/hcloud
    when:
      - cloud_provider is defined
      - cloud_provider == "external"
      - external_cloud_provider is defined
      - external_cloud_provider == "hcloud"
      - inventory_hostname == first_kube_control_plane
    tags:
      - external-cloud-controller
      - external-hcloud
