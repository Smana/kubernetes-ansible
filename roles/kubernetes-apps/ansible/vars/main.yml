---
# CoreDNS vars
coredns_ordinal_suffixes: "{{ [''] + (dns_mode == 'coredns_dual') | ternary(['-secondary'], []) }}"

# Nodelocal DNS vars

primary_dns_by_mode:
  coredns: "{{ skydns_server }}"
  coredns_dual: "{{ skydns_server }}"
  manual: "{{ manual_dns_server }}"
  none: ""

nodelocaldns_forward_target: "{{ ([primary_dns_by_mode[dns_mode]] + (dns_mode == 'coredns_dual') | ternary([skydns_server_secondary], [])) | join(' ') }}"
nodelocaldns_upstream_forward_target: "{{ upstream_dns_servers | d([]) | join(' ') | d('/etc/resolv.conf', true) }}"
