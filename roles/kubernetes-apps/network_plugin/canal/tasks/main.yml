---
- name: Canal | Start Resources
  kube:
    name: "{{item.item.name}}"
    namespace: "{{ system_namespace }}"
    kubectl: "{{bin_dir}}/kubectl"
    resource: "{{item.item.type}}"
    filename: "{{kube_config_dir}}/{{item.item.file}}"
    state: "{{item.changed | ternary('latest','present') }}"
  with_items: "{{ canal_manifests.results }}"
  failed_when: canal_manifests|failed and "Error from server (AlreadyExists)" not in canal_manifests.msg
