---

- name: Bootstrap | Check if bootstrap is needed
  raw: which "{{ item }}"
  register: need_bootstrap
  failed_when: false
  changed_when: false
  with_items:
    - python
  tags: facts

- name: Install python on fedora
  raw: "dnf install --assumeyes --quiet {{ item['item'] }}"
  when: item['rc'] != 0
  loop: "{{ need_bootstrap['results'] }}"

- name: Install required python packages
  dnf:
    name: libselinux-python
    state: present
