---
# Some Fedora based distros ship without Python installed

- name: Check if bootstrap is needed
  raw: which python
  register: need_bootstrap
  failed_when: false
  changed_when: false
  tags:
    - facts

- name: Install python3 on fedora
  raw: "dnf install --assumeyes --quiet python3"
  become: true
  when:
    - need_bootstrap.rc != 0

# libselinux-python3 is required on SELinux enabled hosts
# See https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html#managed-node-requirements
- name: Install libselinux-python3
  package:
    name: libselinux-python3
    state: present
  become: true
