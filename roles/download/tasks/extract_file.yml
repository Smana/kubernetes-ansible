---
- name: file_download | Extract archives
  unarchive:
    src: "{{download.dest}}"
    dest: "{{download.dest|dirname}}"
    owner: "{{ download.owner|default(omit) }}"
    mode: "{{ download.mode|default(omit) }}"
    copy: no
  when:
    - download.enabled
    - download.file
    - download.unarchive|default(False)
    - group_names | intersect(download.groups) | length

